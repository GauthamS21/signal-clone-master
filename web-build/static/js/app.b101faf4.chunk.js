(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{242:function(e,t,a){"use strict";a.d(t,"a",(function(){return J}));var n=a(104),r=a(77),o=a(0),i=a.n(o),c=a(2),l=a(179),s=a(345),u=a(16),m=a.n(u),d=a(4),h=a(30),f=a(87),g=a(80),p=(a(319),a(320),(0===g.a.apps.length?g.a.initializeApp({apiKey:"AIzaSyD4hq3kEgPZghBkMCjlKfYrr83YG0yDShU",authDomain:"our-signal.firebaseapp.com",projectId:"our-signal",storageBucket:"our-signal.appspot.com",messagingSenderId:"684834435684",appId:"1:684834435684:web:fb46caf8f55e4ab6e7e571",measurementId:"G-Y6R31T2FY5"}):g.a.app()).firestore()),E=g.a.auth(),y=function(e){var t=e.navigation,a=Object(o.useState)(""),n=m()(a,2),c=n[0],l=n[1],s=Object(o.useState)(""),u=m()(s,2),g=u[0],p=u[1];Object(o.useEffect)((function(){return E.onAuthStateChanged((function(e){console.log(e),e&&t.replace("Home")}))}),[]);var y=function(){E.signInWithEmailAndPassword(c,g).catch((function(e){return alert(e)}))};return i.a.createElement(f.a,{behavior:"padding",style:b.container},i.a.createElement(r.a,{style:"light"}),i.a.createElement(h.c,{source:{uri:"https://blog.mozilla.org/internetcitizen/files/2018/08/signal-logo.png"},style:{width:200,height:300}}),i.a.createElement(d.a,{style:b.inputContainer},i.a.createElement(h.d,{placeholder:"Email",autoFocus:!0,type:"email",value:c,onChangeText:function(e){return l(e)}}),i.a.createElement(h.d,{placeholder:"Password",secureTextEntry:!0,type:"password",value:g,onChangeText:function(e){return p(e)},onSubmitEditing:y})),i.a.createElement(h.b,{containerStyle:b.button,onPress:y,title:"Login"}),i.a.createElement(h.b,{onPress:function(){return t.navigate("Register")},containerStyle:b.button,type:"outline",title:"Register"}),i.a.createElement(d.a,{style:{height:100}}))},b=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10}}),v=function(e){var t=e.navigation,a=Object(o.useState)(""),n=m()(a,2),c=n[0],l=n[1],s=Object(o.useState)(""),u=m()(s,2),g=u[0],p=u[1],y=Object(o.useState)(""),b=m()(y,2),v=b[0],S=b[1],w=Object(o.useState)(""),x=m()(w,2),O=x[0],k=x[1];Object(o.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"ABC"})}),[t]);var T=function(){E.createUserWithEmailAndPassword(g,v).then((function(e){e.user.updateProfile({displayName:c,photoURL:O||"https://cdn3.iconfinder.com/data/icons/avatars-round-flat/33/avat-01-512.png"})})).catch((function(e){return alert(e.message)}))};return i.a.createElement(f.a,{behavior:"padding",style:C.container},i.a.createElement(r.a,{style:"light"}),i.a.createElement(h.f,{h3:!0,style:{marginBottom:50}},"Create a Signal account"),i.a.createElement(d.a,{style:C.inputContainer},i.a.createElement(h.d,{placeholder:"Full Name",autofocus:!0,type:"text",value:c,onChangeText:function(e){return l(e)}}),i.a.createElement(h.d,{placeholder:"Email",type:"email",value:g,onChangeText:function(e){return p(e)}}),i.a.createElement(h.d,{placeholder:"Password",type:"password",secureTextEntry:!0,value:v,onChangeText:function(e){return S(e)}}),i.a.createElement(h.d,{placeholder:"Profile Picture URL (optional)",type:"text",value:O,onChangeText:function(e){return k(e)},onSubmitEditing:T})),i.a.createElement(h.b,{containerStyle:C.button,raised:!0,onPress:T,title:"Register"}),i.a.createElement(d.a,{style:{height:100}}))},C=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},button:{width:200,marginTop:10},inputContainer:{width:300}}),S=function(e){var t,a,n,r=e.id,c=e.chatName,l=e.enterChat,s=Object(o.useState)([]),u=m()(s,2),d=u[0],f=u[1];return Object(o.useEffect)((function(){return p.collection("chats").doc(r).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return f(e.docs.map((function(e){return e.data()})))}))})),i.a.createElement(h.e,{key:r,onPress:function(){return l(r,c)},key:r,bottomDivider:!0},i.a.createElement(h.a,{rounded:!0,source:{uri:(null==d||null==(t=d[0])?void 0:t.photoURL)||"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png"}}),i.a.createElement(h.e.Content,null,i.a.createElement(h.e.Title,{style:{fontWeight:"800"}},c),i.a.createElement(h.e.Subtitle,{numberOfLines:1,ellipsizeMode:"tail"},null==d||null==(a=d[0])?void 0:a.displayName,": ",null==d||null==(n=d[0])?void 0:n.message)))},w=(c.a.create({}),a(86)),x=a(52),O=a(233),k=a(228),T=function(e){var t=e.navigation,a=function(){E.signOut().then((function(){return t.replace("Login")}))},r=Object(o.useState)([]),c=m()(r,2),l=c[0],s=c[1];Object(o.useEffect)((function(){return p.collection("chats").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(o.useLayoutEffect)((function(){t.setOptions({title:"Signal",headerStyle:{backgroundColor:"white"},headerTitleStyle:{color:"black"},headerTintColor:"black",headerLeft:function(){var e;return i.a.createElement(d.a,{style:{marginLeft:20}},i.a.createElement(n.a,{activeOpacity:.5,onPress:a},i.a.createElement(h.a,{rounded:!0,source:{uri:null==E||null==(e=E.currentUser)?void 0:e.photoURL}})))},headerRight:function(){return i.a.createElement(d.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},i.a.createElement(n.a,{activeOpacity:.5},i.a.createElement(O.a,{name:"camerao",size:24,color:"black"})),i.a.createElement(n.a,{activeOpacity:.5,onPress:function(){return t.navigate("AddChat")}},i.a.createElement(k.a,{name:"pencil",size:24,color:"black"})))}})}),[t]);var u=function(e,a){t.navigate("Chat",{id:e,chatName:a})};return i.a.createElement(w.a,null,i.a.createElement(x.a,{style:j.container},l.map((function(e){var t=e.id,a=e.data.chatName;return i.a.createElement(S,{key:t,id:t,chatName:a,enterChat:u})}))))},j=c.a.create({container:{height:"100%"}}),L=a(22),R=a.n(L),P=a(141),B=function(e){var t=e.navigation,a=Object(o.useState)(""),n=m()(a,2),r=n[0],c=n[1];Object(o.useLayoutEffect)((function(){t.setOptions({title:"Add a new Chat",headerBackTitle:"Chats"})}),[t]);var l=function(){return R.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.awrap(p.collection("chats").add({chatName:r}).then((function(){t.goBack()})).catch((function(e){return alert(e)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)};return i.a.createElement(d.a,{style:U.container},i.a.createElement(h.d,{placeholder:"Enter a chat name",value:r,onChangeText:function(e){return c(e)},onSubmitEditing:l,leftIcon:i.a.createElement(P.default,{name:"wechat",type:"antdesign",size:24,color:"black"})}),i.a.createElement(h.b,{disabled:!r,onPress:l,title:"Create new Chat"}))},U=c.a.create({container:{backgroundColor:"white",padding:30,height:100}}),z=a(25),N=a(26),I=a(223),A=a(214),D=a(59),W=a(64),F=a(71),Y=a(8),M=function(e){var t=e.navigation,a=e.route,n=Object(o.useState)(""),c=m()(n,2),l=c[0],s=c[1],u=Object(o.useState)([]),y=m()(u,2),b=y[0],v=y[1];Object(o.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitleVisible:!1,headerTitleAlign:"left",headerTitle:function(){var e;return i.a.createElement(d.a,{style:{flexDirection:"row",alignItems:"center"}},i.a.createElement(h.a,{rounded:!0,source:{uri:(null==(e=b[0])?void 0:e.data.photoURL)||"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png"}}),i.a.createElement(z.a,{style:{color:"white",marginLeft:10,fontWeight:"700"}},a.params.chatName))},headerLeft:function(){return i.a.createElement(N.a,{style:{margineLeft:10},onPress:t.goBack},i.a.createElement(O.a,{name:"arrowleft",size:24,color:"white"}))},headerRight:function(){return i.a.createElement(d.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},i.a.createElement(N.a,null,i.a.createElement(I.a,{name:"video-camera",size:24,color:"white"})),i.a.createElement(N.a,null,i.a.createElement(A.a,{name:"call",size:24,color:"white"})))}})}),[t,b]);var C=function(){W.a.dismiss(),p.collection("chats").doc(a.params.id).collection("messages").add({timestamp:g.firestore.FieldValue.serverTimestamp(),message:l,displayName:E.currentUser.displayName,email:E.currentUser.email,photoURL:E.currentUser.photoURL}),s("")};return Object(o.useLayoutEffect)((function(){return p.collection("chats").doc(a.params.id).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return v(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[a]),i.a.createElement(w.a,{style:{flex:1,backgroundColor:"white"}},i.a.createElement(r.a,{style:"light"}),i.a.createElement(f.a,{behavior:"ios"===Y.a.OS?"padding":"height",style:V.container,keyboardVerticalOffset:90},i.a.createElement(F.a,{onPress:W.a.dismiss},i.a.createElement(i.a.Fragment,null,i.a.createElement(x.a,{contentContainerStyle:{paddingTop:15}},b.map((function(e){var t=e.id,a=e.data;return a.email===E.currentUser.email?i.a.createElement(d.a,{key:t,style:V.receiver},i.a.createElement(h.a,{position:"absolute",rounded:!0,bottom:-15,right:-5,size:30,source:{uri:a.photoURL}}),i.a.createElement(z.a,{style:V.receiverText},a.message)):i.a.createElement(d.a,{key:t,style:V.sender},i.a.createElement(h.a,{position:"absolute",containerStyle:{position:"absolute",bottom:-15,left:-5},bottom:-15,left:-5,rounded:!0,size:30,source:{uri:a.photoURL}}),i.a.createElement(z.a,{style:V.senderText},a.message),i.a.createElement(z.a,{style:V.senderName},a.displayName))}))),i.a.createElement(d.a,{style:V.footer},i.a.createElement(D.a,{value:l,onChangeText:function(e){return s(e)},onSubmitEditing:C,placeholder:"Signal Message",style:V.textInput}),i.a.createElement(N.a,{onPress:C,activeOpacity:.5},i.a.createElement(A.a,{name:"send",size:24,color:"#2B68E6"})))))))},V=c.a.create({container:{flex:1},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},textInput:{bottom:0,height:40,flex:1,marginLeft:15,borderColor:"transparent",backgroundColor:"#ECECEC",padding:10,color:"grey",borderRadius:30},receiverText:{color:"black",fontWeight:"500",marginLeft:10},senderText:{},receiver:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{padding:15,backgroundColor:"#2868E6",alignSelf:"flex-start",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},senderName:{left:10,paddingRight:10,fontSize:10,color:"white"},senderText:{color:"white",fontWeight:"500",marginLeft:10,marginBottom:15}}),G=Object(s.a)(),H={headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white"},headerTintColor:"white"};function J(){return i.a.createElement(l.a,null,i.a.createElement(G.Navigator,{screenOptions:H},i.a.createElement(G.Screen,{name:"Login",component:y}),i.a.createElement(G.Screen,{name:"Register",component:v}),i.a.createElement(G.Screen,{name:"Home",component:T}),i.a.createElement(G.Screen,{name:"AddChat",component:B}),i.a.createElement(G.Screen,{name:"Chat",component:M})))}c.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},255:function(e,t,a){e.exports=a(330)}},[[255,1,2]]]);
//# sourceMappingURL=app.b101faf4.chunk.js.map